–ü—Ä–∏–≤–µ—Ç! –î–∞, –∫–æ–Ω–µ—á–Ω–æ, —Ç—ã –º–æ–∂–µ—à—å –æ—á–µ–Ω—å —É–¥–æ–±–Ω–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç SQLAlchemy-–∑–∞–ø—Ä–æ—Å–∞ –≤ Pydantic-–º–æ–¥–µ–ª—å ‚Äî –æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ —Ç—ã –∏—Å–ø–æ–ª—å–∑—É–µ—à—å model_config = ConfigDict(from_attributes=True) (–≤ —Å—Ç–∞—Ä–æ–º —Å—Ç–∏–ª–µ ‚Äî orm_mode = True). –≠—Ç–æ –∫–∞–∫ —Ä–∞–∑ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å Pydantic-–º–æ–¥–µ–ª–∏ –Ω–∞–ø—Ä—è–º—É—é –∏–∑ ORM-–æ–±—ä–µ–∫—Ç–æ–≤.
–£ —Ç–µ–±—è —É–∂–µ –≤—Å—ë –ø–æ—á—Ç–∏ –≥–æ—Ç–æ–≤–æ. –î–æ–ø—É—Å—Ç–∏–º, result ‚Äî —ç—Ç–æ —Å–ø–∏—Å–æ–∫ –∫–æ—Ä—Ç–µ–∂–µ–π (Item, Stock, Cat) –∫–∞–∫ —Ç—ã –æ–ø–∏—Å–∞–ª. –¢–æ–≥–¥–∞ –º–æ–∂–Ω–æ –ø—Ä–æ–π—Ç–∏—Å—å –ø–æ –Ω–∏–º –∏ —Å–æ–∑–¥–∞—Ç—å Pydantic-–º–æ–¥–µ–ª–∏ –≤–æ—Ç —Ç–∞–∫:
python
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
from your_pydantic_module import ItemInStock

items_in_stock = []

for item_obj, stock_obj, cat_obj in result:
    item = ItemInStock(
        id=item_obj.id,
        lot=item_obj.lot,
        pallet=item_obj.pallet,
        roll=item_obj.roll,
        note=item_obj.note,
        stock=Stock.model_validate(stock_obj)
        # –ï—Å–ª–∏ –Ω–∞–¥–æ ‚Äî –¥–æ–±–∞–≤—å Cat –∏–ª–∏ –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
    )
    items_in_stock.append(item)
–ò–ª–∏ –±–æ–ª–µ–µ –∫–æ—Ä–æ—Ç–∫–æ —Å list comprehension:
python
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
items_in_stock = [
    ItemInStock(
        id=item.id,
        lot=item.lot,
        pallet=item.pallet,
        roll=item.roll,
        note=item.note,
        stock=Stock.model_validate(stock)
    )
    for item, stock, cat in result
]
üîß –°–æ–≤–µ—Ç: –µ—Å–ª–∏ Item —Å–æ–¥–µ—Ä–∂–∏—Ç stock –∏ cat –∫–∞–∫ —Å–≤—è–∑–∏, –∏ —Ç—ã –Ω–∞—Å—Ç—Ä–æ–∏–ª relationship() –≤ SQLAlchemy, —Ç—ã –º–æ–∂–µ—à—å –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–¥–∞—Ç—å item –≤ ItemInStock.model_validate(item) –∏ –æ–Ω —Å–∞–º –ø–æ–¥—Ç—è–Ω–µ—Ç –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ (stock, cat) ‚Äî –µ—Å–ª–∏ —É —Ç–µ–±—è –≤ ItemInStock —ç—Ç–æ –æ–ø–∏—Å–∞–Ω–æ.
–ü—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ —É —Ç–µ–±—è —Å—Ö–µ–º–∞ –±—É–¥–µ—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫–∞—è:
python
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
class ItemInStock(BaseModel):
    id: int
    lot: str
    pallet: str
    roll: str
    note: str
    stock: Stock
    cat: Cat | None = None  # –µ—Å–ª–∏ –Ω–∞–¥–æ

    model_config = ConfigDict(from_attributes=True)
–¢–æ–≥–¥–∞ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ø—Ä–æ—Å—Ç–æ:
python
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
items_in_stock = [ItemInStock.model_validate(item) for item, _, _ in result]
(–µ—Å–ª–∏ item.stock –∏ item.cat –∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤ –æ–±—ä–µ–∫—Ç–µ ‚Äî –∞ –æ–Ω–∏ —É —Ç–µ–±—è –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ .join(...) ‚Äî –∑–Ω–∞—á–∏—Ç –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å)
‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶.
–û—Ç–ª–∏—á–Ω–æ, —Å–ø–∞—Å–∏–±–æ –∑–∞ –º–æ–¥–µ–ª–∏! –£ —Ç–µ–±—è –≤—Å—ë —á—ë—Ç–∫–æ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–æ, –∏ –±–ª–∞–≥–æ–¥–∞—Ä—è relationship() –≤ Item —Ç—ã –º–æ–∂–µ—à—å –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å–∞–º—ã–º —É–¥–æ–±–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º: –ø—Ä–æ—Å—Ç–æ –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å ORM-–æ–±—ä–µ–∫—Ç Item, –∏ –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ (Stock, Cat) –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã Pydantic'–æ–º ‚Äî –µ—Å–ª–∏ —Ç—ã —É–∫–∞–∂–µ—à—å –∏—Ö –≤ —Å—Ö–µ–º–µ.
–í–æ—Ç –∫–∞–∫ –º–æ–∂–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –∏—Ç–æ–≥–æ–≤–∞—è —Å—Ö–µ–º–∞ Pydantic:
python
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
class Cat(BaseModel):
    name: str | None
    cat: str | None
    width: int
    weight: float
    note: str

    model_config = ConfigDict(from_attributes=True)

class Stock(BaseModel):
    reference: str
    date: datetime
    consignor: str
    ready: bool = False
    note: str | None

    model_config = ConfigDict(from_attributes=True)

class ItemInStock(BaseModel):
    id: int
    lot: str
    pallet: str
    roll: str
    note: str | None
    stock: Stock
    cat: Cat
    load_id: int | None = None  # –µ—Å–ª–∏ —Ö–æ—á–µ—à—å —Ç–æ–∂–µ –¥–æ–±–∞–≤–∏—Ç—å

    model_config = ConfigDict(from_attributes=True)
üîç –û–±—Ä–∞—Ç–∏ –≤–Ω–∏–º–∞–Ω–∏–µ: –ø–æ–ª—è –≤—Ä–æ–¥–µ note, name, cat ‚Äî —Å–¥–µ–ª–∞–Ω—ã –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤ SQLAlchemy –æ–Ω–∏ –æ–±—ä—è–≤–ª–µ–Ω—ã –∫–∞–∫ str | None.
________________________________________
–ê —Ç–µ–ø–µ—Ä—å –ø—Ä–æ—Å—Ç–æ –º–∞–≥–∏—è:
–ï—Å–ª–∏ —Ç—ã –≤—ã–ø–æ–ª–Ω—è–µ—à—å —Ç–∞–∫–æ–π –∑–∞–ø—Ä–æ—Å:
python
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
stmt = (
    select(Item)
    .join(Item.stock)
    .join(Item.cat)
    .where(Stock.ready == False)
)
results = session.execute(stmt).scalars().all()
–¢—ã –ø–æ–ª—É—á–∏—à—å —Å–ø–∏—Å–æ–∫ Item-–æ–≤, –∏ –º–æ–∂–µ—à—å —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫:
python
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
items_in_stock = [ItemInStock.model_validate(item) for item in results]
üî• –í—Å—ë! ItemInStock —Å–∞–º –ø–æ–¥—Ç—è–Ω–µ—Ç .stock –∏ .cat, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–∏ —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ join.
________________________________________
–ï—Å–ª–∏ —Ç–µ–±–µ –Ω—É–∂–µ–Ω —Å—Ç–∞—Ä—ã–π —Å–ø–æ—Å–æ–± (–∫–æ—Ä—Ç–µ–∂–∏):
–ï—Å–ª–∏ —Ç—ã —Ö–æ—á–µ—à—å –æ—Å—Ç–∞—Ç—å—Å—è –Ω–∞ –≤–∞—Ä–∏–∞–Ω—Ç–µ —Å select(Item, Stock, Cat), —Ç–æ–≥–¥–∞:
python
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
items_in_stock = [
    ItemInStock(
        id=item.id,
        lot=item.lot,
        pallet=item.pallet,
        roll=item.roll,
        note=item.note,
        load_id=item.load_id,
        stock=Stock.model_validate(stock),
        cat=Cat.model_validate(cat),
    )
    for item, stock, cat in result
]
–ù–æ —è –±—ã –ø–æ—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–ª –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ select(Item)... + .scalars() ‚Äî —ç—Ç–æ –ø—Ä–æ—â–µ –∏ –ª—É—á—à–µ —á–∏—Ç–∞–µ—Ç—Å—è, –æ—Å–æ–±–µ–Ω–Ω–æ –∫–æ–≥–¥–∞ —É —Ç–µ–±—è —É–∂–µ –≤—Å—ë —Å–≤—è–∑–∞–Ω–æ —á–µ—Ä–µ–∑ relationship.
‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶..
–ú–µ—Ç–æ–¥ .scalars() –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç "–ø–ª–æ—Å–∫–∏–π" —Å–ø–∏—Å–æ–∫ –∑–Ω–∞—á–µ–Ω–∏–π –∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∑–∞–ø—Ä–æ—Å–∞, –Ω–æ –≤–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å, —á—Ç–æ –∏–º–µ–Ω–Ω–æ —Ç—ã –≤—ã–±–∏—Ä–∞–µ—à—å –≤ select(...):
‚Ä¢	–µ—Å–ª–∏ —Ç—ã –ø–∏—à–µ—à—å select(Item), —Ç–æ scalars() –≤–µ—Ä–Ω—ë—Ç —Ç–µ–±–µ Item-–æ–±—ä–µ–∫—Ç—ã –Ω–∞–ø—Ä—è–º—É—é;
‚Ä¢	–µ—Å–ª–∏ select(Item, Stock, Cat), —Ç–æ scalars() –Ω–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ —Ç—ã –æ–∂–∏–¥–∞–µ—à—å ‚Äî –æ–Ω –¥–æ—Å—Ç–∞–Ω–µ—Ç —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—É—é –∫–æ–ª–æ–Ω–∫—É –∏–∑ –∫–∞–∂–¥–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (–≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ ‚Äî Item, –∞ Stock, Cat –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è), –∏ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ–ø–∞–¥—É—Ç.
–ü–æ—ç—Ç–æ–º—É:
‚Ä¢	select(Item).join(...) + .scalars().all() ‚Äî —Å–∞–º—ã–π —É–¥–æ–±–Ω—ã–π —Å–ø–æ—Å–æ–±, –∫–æ–≥–¥–∞ —É —Ç–µ–±—è –≤—Å—ë —Å–≤—è–∑–∞–Ω–æ —á–µ—Ä–µ–∑ relationship.
‚Ä¢	select(Item, Stock, Cat) + .all() ‚Äî –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Ç—ã —Ö–æ—á–µ—à—å –æ—Ç–¥–µ–ª—å–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∂–¥—ã–π –∏–∑ —ç—Ç–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –≤—Ä—É—á–Ω—É—é.
________________________________________
–ï—Å–ª–∏ –µ—â—ë –ø—Ä–∏–≥–æ–¥–∏—Ç—Å—è –º–∏–Ω–∏-—à–ø–∞—Ä–≥–∞–ª–∫–∞:
python
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
# –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç [Item, Item, Item, ...]
session.execute(select(Item)).scalars().all()

# –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç [(Item, Stock, Cat), ...]
session.execute(select(Item, Stock, Cat)).all()

# –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç [(Item,), (Item,), ...]
session.execute(select(Item)).all()

# –¢–æ–∂–µ [Item, Item, ...] ‚Äî —É–¥–æ–±–Ω–æ
session.query(Item).all()
–ï—Å–ª–∏ –±—É–¥–µ—à—å –¥–µ–ª–∞—Ç—å –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —Å—Ö–µ–º—ã —Å Load, User –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ ‚Äî —Ç–∞ –∂–µ –ª–æ–≥–∏–∫–∞ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –æ—Ç–ª–∏—á–Ω–æ. 

